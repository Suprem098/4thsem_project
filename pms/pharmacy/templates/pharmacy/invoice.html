<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice #{{ order.id }}</title>
    <style>
        body { font-family: 'Helvetica', sans-serif; padding: 40px; color: #333; max-width: 800px; margin: 0 auto; }
        .invoice-header { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
        .invoice-title { font-size: 24px; font-weight: bold; color: #2563eb; margin-bottom: 5px; }
        .invoice-details { text-align: right; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        th { background-color: #f8f9fa; font-weight: bold; }
        .total-section { text-align: right; font-size: 18px; font-weight: bold; margin-top: 20px; }
        .print-btn { background: #2563eb; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 16px; text-decoration: none; display: inline-block; }
        .print-btn:hover { background: #1e40af; }
        .back-btn { background: #64748b; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 16px; text-decoration: none; display: inline-block; margin-left: 10px; }
        .actions { text-align: center; margin-top: 50px; }
        @media print {
            .actions { display: none; }
            body { padding: 0; max-width: 100%; }
        }
    </style>
</head>
<body>
    <div class="invoice-header">
        <div>
            <div class="invoice-title">Pharmacy Management System</div>
            <p>123 Pharmacy Street, Health City</p>
            <p>Phone: (123) 456-7890</p>
        </div>
        <div class="invoice-details">
            <h3 style="margin-top: 0;">INVOICE</h3>
            <p><strong>Order ID:</strong> #{{ order.id }}</p>
            <p><strong>Date:</strong> {{ order.order_date|date:"Y-m-d" }}</p>
            <p><strong>Customer:</strong> {{ order.customer.name }}</p>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Item</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.medicine.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>Rs. {{ item.medicine.price }}</td>
                <td>Rs. {% widthratio item.medicine.price 1 item.quantity %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="total-section">
        <p>Grand Total: Rs. {{ order.total_amount }}</p>
    </div>

    <div class="actions">
        <button onclick="window.print()" class="print-btn">Print Invoice</button>
        <a href="{% url 'order_detail' order.pk %}" class="back-btn">Back to Order</a>
    </div>
</body>
</html>